<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Alan 的 web 笔记</title>
    <meta name="description" content="本网站由 VitePress 自动生成">
    <meta name="generator" content="VitePress v1.0.1">
    <link rel="preload stylesheet" href="/Lim-note-web/assets/style.r4BXBlOE.css" as="style">
    
    <script type="module" src="/Lim-note-web/assets/app.rrvggD_G.js"></script>
    <link rel="preload" href="/Lim-note-web/assets/inter-roman-latin.Bu8hRsVA.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/Lim-note-web/assets/chunks/framework.pPPfHAGV.js">
    <link rel="modulepreload" href="/Lim-note-web/assets/chunks/theme.CmuhD2eH.js">
    <link rel="modulepreload" href="/Lim-note-web/assets/docs_Express_middleware.md.CLRv-rRx.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-d8b57b2d><!--[--><!--]--><!--[--><span tabindex="-1" data-v-c8291ffa></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-c8291ffa> Skip to content </a><!--]--><!----><header class="VPNav" data-v-d8b57b2d data-v-7ad780c2><div class="VPNavBar has-sidebar top" data-v-7ad780c2 data-v-844edcde><div class="wrapper" data-v-844edcde><div class="container" data-v-844edcde><div class="title" data-v-844edcde><div class="VPNavBarTitle has-sidebar" data-v-844edcde data-v-0ad69264><a class="title" href="/Lim-note-web/" data-v-0ad69264><!--[--><!--]--><!----><span data-v-0ad69264>Alan 的 web 笔记</span><!--[--><!--]--></a></div></div><div class="content" data-v-844edcde><div class="content-body" data-v-844edcde><!--[--><!--]--><div class="VPNavBarSearch search" data-v-844edcde><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-844edcde data-v-f732b5d0><span id="main-nav-aria-label" class="visually-hidden" data-v-f732b5d0>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Lim-note-web/" tabindex="0" data-v-f732b5d0 data-v-08fbf4b6><!--[--><span data-v-08fbf4b6>主页</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Lim-note-web/README.html" tabindex="0" data-v-f732b5d0 data-v-08fbf4b6><!--[--><span data-v-08fbf4b6>web 笔记</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://blog.linhieng.com/Lim-note-vscode" target="_blank" rel="noreferrer" tabindex="0" data-v-f732b5d0 data-v-08fbf4b6><!--[--><span data-v-08fbf4b6>vscode 笔记</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-844edcde data-v-283b26e9><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-283b26e9 data-v-7df97737 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-7df97737></span><span class="vpi-moon moon" data-v-7df97737></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-844edcde data-v-ef6192dc data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/linhieng/lim-note-web" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-358b6670><span class="vpi-social-github" /></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-844edcde data-v-8e87c032 data-v-af5898d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-af5898d3><span class="vpi-more-horizontal icon" data-v-af5898d3></span></button><div class="menu" data-v-af5898d3><div class="VPMenu" data-v-af5898d3 data-v-e42ed9b3><!----><!--[--><!--[--><!----><div class="group" data-v-8e87c032><div class="item appearance" data-v-8e87c032><p class="label" data-v-8e87c032>Appearance</p><div class="appearance-action" data-v-8e87c032><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-8e87c032 data-v-7df97737 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-7df97737></span><span class="vpi-moon moon" data-v-7df97737></span><!--]--></span></span></button></div></div></div><div class="group" data-v-8e87c032><div class="item social-links" data-v-8e87c032><div class="VPSocialLinks social-links-list" data-v-8e87c032 data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/linhieng/lim-note-web" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-358b6670><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-844edcde data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><div class="divider" data-v-844edcde><div class="divider-line" data-v-844edcde></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-d8b57b2d data-v-2488c25a><div class="container" data-v-2488c25a><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-2488c25a><span class="vpi-align-left menu-icon" data-v-2488c25a></span><span class="menu-text" data-v-2488c25a>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-2488c25a data-v-0b5c97a1><button data-v-0b5c97a1>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-d8b57b2d data-v-4871f9f5><div class="curtain" data-v-4871f9f5></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-4871f9f5><span class="visually-hidden" id="sidebar-aria-label" data-v-4871f9f5> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-4871f9f5><section class="VPSidebarItem level-0" data-v-4871f9f5 data-v-c24f735a><div class="item" role="button" tabindex="0" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><h2 class="text" data-v-c24f735a>Ajv</h2><!----></div><div class="items" data-v-c24f735a><!--[--><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/Lim-note-web/docs/Ajv/README.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>README</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-4871f9f5><section class="VPSidebarItem level-0" data-v-4871f9f5 data-v-c24f735a><div class="item" role="button" tabindex="0" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><h2 class="text" data-v-c24f735a>CSS</h2><!----></div><div class="items" data-v-c24f735a><!--[--><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/Lim-note-web/docs/CSS/scss.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>scss</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-4871f9f5><section class="VPSidebarItem level-0" data-v-4871f9f5 data-v-c24f735a><div class="item" role="button" tabindex="0" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><h2 class="text" data-v-c24f735a>Docker</h2><!----></div><div class="items" data-v-c24f735a><!--[--><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/Lim-note-web/docs/Docker/draft.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>draft</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-4871f9f5><section class="VPSidebarItem level-0" data-v-4871f9f5 data-v-c24f735a><div class="item" role="button" tabindex="0" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><h2 class="text" data-v-c24f735a>ES6</h2><!----></div><div class="items" data-v-c24f735a><!--[--><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/Lim-note-web/docs/ES6/ES_Version.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>ES_Version</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/Lim-note-web/docs/ES6/README.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>README</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/Lim-note-web/docs/ES6/draft.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>draft</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-4871f9f5><section class="VPSidebarItem level-0" data-v-4871f9f5 data-v-c24f735a><div class="item" role="button" tabindex="0" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><h2 class="text" data-v-c24f735a>ESLint</h2><!----></div><div class="items" data-v-c24f735a><!--[--><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/Lim-note-web/docs/ESLint/README.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>README</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-4871f9f5><section class="VPSidebarItem level-0" data-v-4871f9f5 data-v-c24f735a><div class="item" role="button" tabindex="0" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><h2 class="text" data-v-c24f735a>Express</h2><!----></div><div class="items" data-v-c24f735a><!--[--><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/Lim-note-web/docs/Express/draft.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>draft</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/Lim-note-web/docs/Express/middleware.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>middleware</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-4871f9f5><section class="VPSidebarItem level-0" data-v-4871f9f5 data-v-c24f735a><div class="item" role="button" tabindex="0" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><h2 class="text" data-v-c24f735a>Jest</h2><!----></div><div class="items" data-v-c24f735a><!--[--><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/Lim-note-web/docs/Jest/README.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>README</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/Lim-note-web/docs/Jest/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>配置文件</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-4871f9f5><section class="VPSidebarItem level-0" data-v-4871f9f5 data-v-c24f735a><div class="item" role="button" tabindex="0" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><h2 class="text" data-v-c24f735a>Nginx</h2><!----></div><div class="items" data-v-c24f735a><!--[--><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/Lim-note-web/docs/Nginx/draft.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>draft</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-4871f9f5><section class="VPSidebarItem level-0" data-v-4871f9f5 data-v-c24f735a><div class="item" role="button" tabindex="0" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><h2 class="text" data-v-c24f735a>Nodejs</h2><!----></div><div class="items" data-v-c24f735a><!--[--><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/Lim-note-web/docs/Nodejs/README.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>README</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-4871f9f5><section class="VPSidebarItem level-0" data-v-4871f9f5 data-v-c24f735a><div class="item" role="button" tabindex="0" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><h2 class="text" data-v-c24f735a>Prettier</h2><!----></div><div class="items" data-v-c24f735a><!--[--><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/Lim-note-web/docs/Prettier/README.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>README</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-4871f9f5><section class="VPSidebarItem level-0" data-v-4871f9f5 data-v-c24f735a><div class="item" role="button" tabindex="0" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><h2 class="text" data-v-c24f735a>Rollup</h2><!----></div><div class="items" data-v-c24f735a><!--[--><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/Lim-note-web/docs/Rollup/README.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>README</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/Lim-note-web/docs/Rollup/base-use.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>base-use</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-4871f9f5><section class="VPSidebarItem level-0" data-v-4871f9f5 data-v-c24f735a><div class="item" role="button" tabindex="0" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><h2 class="text" data-v-c24f735a>Svelte</h2><!----></div><div class="items" data-v-c24f735a><!--[--><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/Lim-note-web/docs/Svelte/README.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>README</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/Lim-note-web/docs/Svelte/SvelteKit-base-use.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>SvelteKit-base-use</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/Lim-note-web/docs/Svelte/base-use.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>base-use</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/Lim-note-web/docs/Svelte/draft.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>draft</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-4871f9f5><section class="VPSidebarItem level-0" data-v-4871f9f5 data-v-c24f735a><div class="item" role="button" tabindex="0" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><h2 class="text" data-v-c24f735a>Typescript</h2><!----></div><div class="items" data-v-c24f735a><!--[--><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/Lim-note-web/docs/Typescript/README.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>README</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/Lim-note-web/docs/Typescript/TS%E7%89%B9%E6%80%A7.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>TS特性</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/Lim-note-web/docs/Typescript/draft.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>draft</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/Lim-note-web/docs/Typescript/how.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>how</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/Lim-note-web/docs/Typescript/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>配置文件</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-4871f9f5><section class="VPSidebarItem level-0" data-v-4871f9f5 data-v-c24f735a><div class="item" role="button" tabindex="0" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><h2 class="text" data-v-c24f735a>Vue</h2><!----></div><div class="items" data-v-c24f735a><!--[--><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/Lim-note-web/docs/Vue/%E5%93%8D%E5%BA%94%E5%BC%8F/README.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>README</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/Lim-note-web/docs/Vue/%E5%93%8D%E5%BA%94%E5%BC%8F/reactive%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>reactive源码解析</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/Lim-note-web/docs/Vue/%E8%84%9A%E6%89%8B%E6%9E%B6/draft.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>draft</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-4871f9f5><section class="VPSidebarItem level-0" data-v-4871f9f5 data-v-c24f735a><div class="item" role="button" tabindex="0" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><h2 class="text" data-v-c24f735a>draft</h2><!----></div><div class="items" data-v-c24f735a><!--[--><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/Lim-note-web/docs/draft/JavaScript/Example/%E4%BA%A4%E9%80%9A%E7%81%AF%E5%88%87%E6%8D%A2.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>交通灯切换</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/Lim-note-web/docs/draft/JavaScript/Example/%E8%BD%AE%E6%92%AD%E5%9B%BE%E4%BC%98%E5%8C%96%E8%BF%87%E7%A8%8B.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>轮播图优化过程</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/Lim-note-web/docs/draft/JavaScript/JS%E8%BF%90%E8%A1%8C%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>JS运行核心概念</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/Lim-note-web/docs/draft/JavaScript/Promise%20%E5%9F%BA%E7%A1%80.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>Promise 基础</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/Lim-note-web/docs/draft/JavaScript/Promise%20%E6%9C%AF%E8%AF%AD.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>Promise 术语</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/Lim-note-web/docs/draft/iframe.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>iframe</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/Lim-note-web/docs/draft/inheritance.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>inheritance</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/Lim-note-web/docs/draft/websocket.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>websocket</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-4871f9f5><section class="VPSidebarItem level-0" data-v-4871f9f5 data-v-c24f735a><div class="item" role="button" tabindex="0" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><h2 class="text" data-v-c24f735a>webpack</h2><!----></div><div class="items" data-v-c24f735a><!--[--><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/Lim-note-web/docs/webpack/README.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>README</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-4871f9f5><section class="VPSidebarItem level-0" data-v-4871f9f5 data-v-c24f735a><div class="item" role="button" tabindex="0" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><h2 class="text" data-v-c24f735a>流程管理</h2><!----></div><div class="items" data-v-c24f735a><!--[--><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/Lim-note-web/docs/%E6%B5%81%E7%A8%8B%E7%AE%A1%E7%90%86/README.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>README</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c24f735a data-v-c24f735a><div class="item" data-v-c24f735a><div class="indicator" data-v-c24f735a></div><a class="VPLink link link" href="/Lim-note-web/docs/%E6%B5%81%E7%A8%8B%E7%AE%A1%E7%90%86/commitlint.html" data-v-c24f735a><!--[--><p class="text" data-v-c24f735a>commitlint</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-d8b57b2d data-v-9a6c75ad><div class="VPDoc has-sidebar has-aside" data-v-9a6c75ad data-v-e6f2a212><!--[--><!--]--><div class="container" data-v-e6f2a212><div class="aside" data-v-e6f2a212><div class="aside-curtain" data-v-e6f2a212></div><div class="aside-container" data-v-e6f2a212><div class="aside-content" data-v-e6f2a212><div class="VPDocAside" data-v-e6f2a212 data-v-cb998dce><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-cb998dce data-v-6b52fe58><div class="content" data-v-6b52fe58><div class="outline-marker" data-v-6b52fe58></div><div class="outline-title" role="heading" aria-level="2" data-v-6b52fe58>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-6b52fe58><span class="visually-hidden" id="doc-outline-aria-label" data-v-6b52fe58> Table of Contents for current page </span><ul class="VPDocOutlineItem root" data-v-6b52fe58 data-v-53c99d69><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-e6f2a212><div class="content-container" data-v-e6f2a212><!--[--><!--]--><main class="main" data-v-e6f2a212><div style="position:relative;" class="vp-doc _Lim-note-web_docs_Express_middleware" data-v-e6f2a212><div><p>常用中间件</p><ul><li><code>body-parse</code></li><li><code>cors</code></li><li><code>multer</code></li></ul><table><thead><tr><th>middleware</th><th>handler (Content-Type)</th></tr></thead><tbody><tr><td><code>body-parse</code></td><td><code>application/json</code></td></tr><tr><td><code>body-parse</code></td><td><code>application/x-www-form-urlencoded</code></td></tr><tr><td><code>multer </code></td><td><code>multipart/form-data</code></td></tr></tbody></table><h2 id="body-parse" tabindex="-1">body-parse <a class="header-anchor" href="#body-parse" aria-label="Permalink to &quot;body-parse&quot;">​</a></h2><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> bodyParser</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;body-parser&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// for parsing application/json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(bodyParser.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// for parsing application/x-www-form-urlencoded</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(bodyParser.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">urlencoded</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ extended: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }))</span></span></code></pre></div><h2 id="multer-中间件" tabindex="-1">multer 中间件 <a class="header-anchor" href="#multer-中间件" aria-label="Permalink to &quot;multer 中间件&quot;">​</a></h2><p>只处理 multipart/form-data 类型的表单数据，主要用于上传文件</p><p>Multer 会添加一个 body 对象 以及 file 或 files 对象 到 express 的 request 对象中。 body 对象包含表单的文本域信息，file 或 files 对象包含对象表单上传的文件信息。</p><p>multer 会填充 body, file 和 files 字段到 req 对象中 body 字段：表单文本值 file 或 files 字段：表单上传的文件 multer 的核心在于处理文件，有以下几种方式： Multer.any() 处理表单中包含的所有文件 Multer.none() 告诉 multer 不需要处理文件 如果表单中有文件会报错 Multer.single() 告诉 multer 处理单文件并填充进 file 字段 Multer.array() 告诉 multer 处理多个文件并填充进 files 字段（此时是数组） 如果没提供参数，等同 none()，此时如果有文件也会报错 Multer.fields() 告诉 multer 按照特定结构处理多个文件并填充进 files 字段（此时是对象） files 字段的结构会和 fields 所定义的结构相同。</p><h3 id="文件包含的信息" tabindex="-1">文件包含的信息 <a class="header-anchor" href="#文件包含的信息" aria-label="Permalink to &quot;文件包含的信息&quot;">​</a></h3><table><thead><tr><th>Key</th><th>Description</th><th>Note</th></tr></thead><tbody><tr><td>fieldname</td><td>Field name 由表单指定</td><td></td></tr><tr><td>originalname</td><td>用户计算机上的文件的名称</td><td></td></tr><tr><td>encoding</td><td>文件编码</td><td></td></tr><tr><td>mimetype</td><td>文件的 MIME 类型</td><td></td></tr><tr><td>size</td><td>文件大小（字节单位）</td><td></td></tr><tr><td>destination</td><td>保存路径</td><td>DiskStorage</td></tr><tr><td>filename</td><td>保存在 destination 中的文件名</td><td>DiskStorage</td></tr><tr><td>path</td><td>已上传文件的完整路径</td><td>DiskStorage</td></tr><tr><td>buffer</td><td>一个存放了整个文件的 Buffer</td><td>MemoryStorage</td></tr></tbody></table><h3 id="multer-options-中的-options-参数" tabindex="-1">multer(options) 中的 options 参数 <a class="header-anchor" href="#multer-options-中的-options-参数" aria-label="Permalink to &quot;multer(options) 中的 options 参数&quot;">​</a></h3><p>Multer 接受一个 options 对象，其中最基本的是 dest 属性，这将告诉 Multer 将上传文件保存在哪。如果你省略 options 对象，这些文件将保存在内存中，永远不会写入磁盘。</p><p>为了避免命名冲突，multer 会对文件进行重命名，该功能可自己定制</p><p>options 可选的配置</p><table><thead><tr><th>Key</th><th>Description</th></tr></thead><tbody><tr><td>dest / storage</td><td>将文件存储在哪里</td></tr><tr><td>fileFilter</td><td>文件过滤器，控制哪些文件可以被接受</td></tr><tr><td>limits</td><td>限制上传的数据</td></tr><tr><td>preservePath</td><td>是否保存包含文件名的完整文件路径</td></tr></tbody></table><p>dest 值为一个路径字符串（若不存在会自动创建） storage 代表存储在内存中，值为 multer.memoryStorage()</p><h3 id="multer-对象上的方法" tabindex="-1">multer 对象上的方法 <a class="header-anchor" href="#multer-对象上的方法" aria-label="Permalink to &quot;multer 对象上的方法&quot;">​</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> upload</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> multer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ dest: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;uploads/&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">post</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/profile&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, upload.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">single</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;avatar&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // req.file 是 `avatar` 文件的信息</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // req.body 将具有文本域数据，如果存在的话</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><ul><li><p>.single(fieldname)</p><p>接受一个以 fieldname 命名的文件。这个文件的信息保存在 req.file。这个 filedname 会和表单中的 name 匹配</p></li><li><p>.array(fieldname[, maxCount])</p><p>接受一个以 fieldname 命名的文件数组。可以配置 maxCount 来限制上传的最大数量。这些文件的信息保存在 req.files。</p></li><li><p>.fields(fields)</p><p>接受指定 fields 的混合文件。这些文件的信息保存在 req.files。</p><p>fields 应该是一个对象数组，应该具有 name 和可选的 maxCount 属性。</p></li></ul><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">upload.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fields</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  { name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;avatar&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, maxCount: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  { name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;gallery&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, maxCount: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span></code></pre></div><ul><li><p>.none()</p><p>只接受文本域。如果任何文件上传到这个模式，将发生 &quot;LIMIT_UNEXPECTED_FILE&quot; 错误。这和 upload.fields([]) 的效果一样。</p></li><li><p>.any()</p><p>接受一切上传的文件。文件数组将保存在 req.files。</p></li></ul><hr><h3 id="storage" tabindex="-1"><code>storage</code> <a class="header-anchor" href="#storage" aria-label="Permalink to &quot;`storage`&quot;">​</a></h3><h4 id="磁盘存储引擎-diskstorage" tabindex="-1">磁盘存储引擎 (<code>DiskStorage</code>) <a class="header-anchor" href="#磁盘存储引擎-diskstorage" aria-label="Permalink to &quot;磁盘存储引擎 (`DiskStorage`)&quot;">​</a></h4><p>磁盘存储引擎可以让你控制文件的存储。</p><p><strong>注意：</strong> cb 是回调函数，第一个参数代表是否是否有错误，若无则传入 null</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> storage</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> multer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">diskStorage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  destination</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">cb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    cb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/tmp/my-uploads&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  filename</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">cb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    cb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, file.fieldname </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;-&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Date.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> upload</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> multer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ storage })</span></span></code></pre></div><p>有两个选项可用，<code>destination</code> 和 <code>filename</code>。他们都是用来确定文件存储位置的函数。</p><p><code>destination</code> 是用来确定上传的文件应该存储在哪个文件夹中。 可以使用一个函数，也可以提供一个 <code>string</code> (例如 <code>&#39;/tmp/uploads&#39;</code>)。如果没有设置 <code>destination</code>，则使用操作系统默认的临时文件夹。</p><p><strong>注意</strong>： 如果你提供的 <code>destination</code> 是一个函数，你需要负责创建文件夹。当提供一个字符串，multer 会自动创建该文件夹（若不存在）</p><p><code>filename</code> 用于确定文件夹中的文件名的确定。 如果没有设置 <code>filename</code>，每个文件将设置为一个随机文件名，并且是没有扩展名的。</p><p><strong>注意</strong>： Multer 不会为你添加任何扩展名，你的程序应该返回一个完整的文件名。</p><p>每个函数都传递了请求对象 (<code>req</code>) 和一些关于这个文件的信息 (<code>file</code>)，有助于你的决定。</p><p>注意 <code>req.body</code> 可能还没有完全填充，这取决于向客户端发送字段和文件到服务器的顺序。</p><hr><h4 id="内存存储引擎-memorystorage" tabindex="-1">内存存储引擎 (<code>MemoryStorage</code>) <a class="header-anchor" href="#内存存储引擎-memorystorage" aria-label="Permalink to &quot;内存存储引擎 (`MemoryStorage`)&quot;">​</a></h4><p>内存存储引擎将文件存储在内存中的 <code>Buffer</code> 对象，它没有任何选项。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> storage</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> multer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">memoryStorage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> upload</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> multer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ storage: storage })</span></span></code></pre></div><p>当使用内存存储引擎，文件信息将包含一个 <code>buffer</code> 字段，里面包含了整个文件数据。</p><p><strong>警告</strong>: 当你使用内存存储，上传非常大的文件，或者非常多的小文件，会导致你的应用程序内存溢出。</p><h3 id="limits-对文件进行限制" tabindex="-1">limits 对文件进行限制 <a class="header-anchor" href="#limits-对文件进行限制" aria-label="Permalink to &quot;limits 对文件进行限制&quot;">​</a></h3><p>limits 是一个对象</p><table><thead><tr><th>Key</th><th>Description（Number 类型）</th><th>Default</th></tr></thead><tbody><tr><td>fieldNameSize</td><td>field 名字最大长度（单位 bytes）</td><td>100 bytes</td></tr><tr><td>fieldSize</td><td>field 值的最大长度（单位 bytes）</td><td>1MB</td></tr><tr><td>fields</td><td>非文件 field 的最大数量</td><td>无限</td></tr><tr><td>fileSize</td><td>在 multipart 表单中，文件最大长度 (字节单位)</td><td>无限</td></tr><tr><td>files</td><td>在 multipart 表单中，文件最大数量</td><td>无限</td></tr><tr><td>parts</td><td>在 multipart 表单中，part 传输的最大数量(fields + files)</td><td>无限</td></tr><tr><td>headerPairs</td><td>在 multipart 表单中，键值对最大组数</td><td>2000</td></tr></tbody></table><p>设置 limits 可以帮助保护你的站点抵御拒绝服务 (DoS) 攻击。</p><h3 id="filefilter" tabindex="-1">fileFilter <a class="header-anchor" href="#filefilter" aria-label="Permalink to &quot;fileFilter&quot;">​</a></h3><p>设置一个函数来控制可以上传什么类型的文件，那些文件会被跳过</p><p>示例：</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fileFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">cb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // cd 函数的第二个参数：指示是否应接受该文件</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 例如：接受这个文件，使用`true`</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  cb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 如果有问题，你可以总是这样发送一个错误:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  cb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`I don&#39;t have a clue!`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><blockquote><p><a href="https://github.com/expressjs/multer" target="_blank" rel="noreferrer">查看官方文档</a><a href="https://github.com/expressjs/multer/blob/master/StorageEngine.md" target="_blank" rel="noreferrer">如何自定义存储引擎</a></p></blockquote></div></div></main><footer class="VPDocFooter" data-v-e6f2a212 data-v-b77f9094><!--[--><!--]--><!----><nav class="prev-next" data-v-b77f9094><div class="pager" data-v-b77f9094><!----></div><div class="pager" data-v-b77f9094><a class="VPLink link pager-link next" href="/Lim-note-web/docs/Ajv/README.html" data-v-b77f9094><!--[--><span class="desc" data-v-b77f9094>Next page</span><span class="title" data-v-b77f9094>README</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"docs_eslint_readme.md\":\"DeDzdCxj\",\"docs_rollup_readme.md\":\"BsQof-nb\",\"readme.md\":\"CYkClQQZ\",\"docs_jest_配置文件.md\":\"BKA46DFn\",\"docs_es6_draft.md\":\"GTtt-lw4\",\"docs_svelte_sveltekit-base-use.md\":\"BU_h7D5T\",\"docs_express_draft.md\":\"CH9epXBp\",\"docs_nodejs_readme.md\":\"Ks6GJqKe\",\"docs_nginx_draft.md\":\"Drf5qVjU\",\"docs_express_middleware.md\":\"CLRv-rRx\",\"docs_prettier_readme.md\":\"BYgvm_PD\",\"docs_docker_draft.md\":\"ClIZRWlS\",\"docs_ajv_readme.md\":\"CbfIj3Ia\",\"docs_es6_readme.md\":\"wuSzqtYu\",\"docs_svelte_readme.md\":\"CpOo36Qm\",\"docs_es6_es_version.md\":\"BgPwbdhy\",\"docs_svelte_draft.md\":\"DOlQqP2u\",\"docs_css_scss.md\":\"BFT1n4Ko\",\"docs_typescript_ts特性.md\":\"eDtvFnqg\",\"docs_rollup_base-use.md\":\"CG_hVLeu\",\"docs_typescript_readme.md\":\"Cv2fubY6\",\"docs_typescript_how.md\":\"Eag4my0l\",\"docs_typescript_配置文件.md\":\"Dt2AsniN\",\"docs_jest_readme.md\":\"DeonnRM_\",\"docs_vue_脚手架_draft.md\":\"BCUOGWS5\",\"docs_vue_响应式_readme.md\":\"BGvcEOYK\",\"docs_draft_iframe.md\":\"DdRjQD5K\",\"docs_svelte_base-use.md\":\"DlFMUNrw\",\"docs_draft_javascript_example_交通灯切换.md\":\"BoZRKoHl\",\"docs_流程管理_readme.md\":\"_o3IX8t1\",\"docs_draft_javascript_example_轮播图优化过程.md\":\"C9fXeNMd\",\"docs_draft_websocket.md\":\"DI1hw1pA\",\"docs_webpack_readme.md\":\"7gXNTVZN\",\"docs_draft_inheritance.md\":\"rzda67Zr\",\"docs_draft_javascript_promise 术语.md\":\"uqfw6G8y\",\"docs_vue_响应式_reactive源码解析.md\":\"CmIVCQRP\",\"docs_流程管理_commitlint.md\":\"A8eVv7Xq\",\"docs_typescript_draft.md\":\"Bx790pCo\",\"index.md\":\"Bre9A3Pm\",\"docs_draft_javascript_js运行核心概念.md\":\"Cc02MNcp\",\"docs_draft_javascript_promise 基础.md\":\"B_yQ0FU1\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Alan 的 web 笔记\",\"description\":\"本网站由 VitePress 自动生成\",\"base\":\"/Lim-note-web/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"主页\",\"link\":\"/\"},{\"text\":\"web 笔记\",\"link\":\"/README\"},{\"text\":\"vscode 笔记\",\"link\":\"https://blog.linhieng.com/Lim-note-vscode\"}],\"sidebar\":[{\"text\":\"Ajv\",\"items\":[{\"text\":\"README\",\"link\":\"docs/Ajv/README.md\"}]},{\"text\":\"CSS\",\"items\":[{\"text\":\"scss\",\"link\":\"docs/CSS/scss.md\"}]},{\"text\":\"Docker\",\"items\":[{\"text\":\"draft\",\"link\":\"docs/Docker/draft.md\"}]},{\"text\":\"ES6\",\"items\":[{\"text\":\"ES_Version\",\"link\":\"docs/ES6/ES_Version.md\"},{\"text\":\"README\",\"link\":\"docs/ES6/README.md\"},{\"text\":\"draft\",\"link\":\"docs/ES6/draft.md\"}]},{\"text\":\"ESLint\",\"items\":[{\"text\":\"README\",\"link\":\"docs/ESLint/README.md\"}]},{\"text\":\"Express\",\"items\":[{\"text\":\"draft\",\"link\":\"docs/Express/draft.md\"},{\"text\":\"middleware\",\"link\":\"docs/Express/middleware.md\"}]},{\"text\":\"Jest\",\"items\":[{\"text\":\"README\",\"link\":\"docs/Jest/README.md\"},{\"text\":\"配置文件\",\"link\":\"docs/Jest/配置文件.md\"}]},{\"text\":\"Nginx\",\"items\":[{\"text\":\"draft\",\"link\":\"docs/Nginx/draft.md\"}]},{\"text\":\"Nodejs\",\"items\":[{\"text\":\"README\",\"link\":\"docs/Nodejs/README.md\"}]},{\"text\":\"Prettier\",\"items\":[{\"text\":\"README\",\"link\":\"docs/Prettier/README.md\"}]},{\"text\":\"Rollup\",\"items\":[{\"text\":\"README\",\"link\":\"docs/Rollup/README.md\"},{\"text\":\"base-use\",\"link\":\"docs/Rollup/base-use.md\"}]},{\"text\":\"Svelte\",\"items\":[{\"text\":\"README\",\"link\":\"docs/Svelte/README.md\"},{\"text\":\"SvelteKit-base-use\",\"link\":\"docs/Svelte/SvelteKit-base-use.md\"},{\"text\":\"base-use\",\"link\":\"docs/Svelte/base-use.md\"},{\"text\":\"draft\",\"link\":\"docs/Svelte/draft.md\"}]},{\"text\":\"Typescript\",\"items\":[{\"text\":\"README\",\"link\":\"docs/Typescript/README.md\"},{\"text\":\"TS特性\",\"link\":\"docs/Typescript/TS特性.md\"},{\"text\":\"draft\",\"link\":\"docs/Typescript/draft.md\"},{\"text\":\"how\",\"link\":\"docs/Typescript/how.md\"},{\"text\":\"配置文件\",\"link\":\"docs/Typescript/配置文件.md\"}]},{\"text\":\"Vue\",\"items\":[{\"text\":\"README\",\"link\":\"docs/Vue/响应式/README.md\"},{\"text\":\"reactive源码解析\",\"link\":\"docs/Vue/响应式/reactive源码解析.md\"},{\"text\":\"draft\",\"link\":\"docs/Vue/脚手架/draft.md\"}]},{\"text\":\"draft\",\"items\":[{\"text\":\"交通灯切换\",\"link\":\"docs/draft/JavaScript/Example/交通灯切换.md\"},{\"text\":\"轮播图优化过程\",\"link\":\"docs/draft/JavaScript/Example/轮播图优化过程.md\"},{\"text\":\"JS运行核心概念\",\"link\":\"docs/draft/JavaScript/JS运行核心概念.md\"},{\"text\":\"Promise 基础\",\"link\":\"docs/draft/JavaScript/Promise 基础.md\"},{\"text\":\"Promise 术语\",\"link\":\"docs/draft/JavaScript/Promise 术语.md\"},{\"text\":\"iframe\",\"link\":\"docs/draft/iframe.md\"},{\"text\":\"inheritance\",\"link\":\"docs/draft/inheritance.md\"},{\"text\":\"websocket\",\"link\":\"docs/draft/websocket.md\"}]},{\"text\":\"webpack\",\"items\":[{\"text\":\"README\",\"link\":\"docs/webpack/README.md\"}]},{\"text\":\"流程管理\",\"items\":[{\"text\":\"README\",\"link\":\"docs/流程管理/README.md\"},{\"text\":\"commitlint\",\"link\":\"docs/流程管理/commitlint.md\"}]}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/linhieng/lim-note-web\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>